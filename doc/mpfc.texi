\input texinfo @c -*-texinfo-*-
@c %**start of header
@setfilename mpfc.info
@settitle MPFC 1.3.2
@c %**end of header

@copying
This manual describes the SG Music Player For Linux Console, version 1.3.2.

Copyright @copyright{} 2003-2004 SG Software.
@end copying

@titlepage
@title SG MPFC
@subtitle Music Player For Linux Console
@author Sergey E. Galanov

@c The following two commands start the copyright page
@page
@vskip 0pt plus 1filll
@insertcopying

@end titlepage

@c Output the table of contents at the beginning
@contents

@ifinfo
@node Top, Introduction, (dir), (dir)
@top MPFC 1.3.2

This manual documents version 1.3.2 of SG MPFC, media player for Linux console.

Copyright @copyright{} 2003 SG Software

@menu
* Introduction::		
* Getting Started::	
* Using Variables::
* Plugins::		
* Copying::	
@end menu
@end ifinfo

@node Introduction, Getting Started, Top, Top
@chapter Introduction to MPFC

MPFC is an abbrevation for Music Player For Console. It is a full-featured
curses-based playlist-oriented player.

MPFC supports a number of input file formats. This support is organised through
input plugins model. It means that the formats list is expandable---you
must simply add a new plugin. Also there are plugins for output and effects.

To get a brief help on MPFC commands you may press @kbd{?} key in MPFC 
main window.

Turn to the following sections to learn about MPFC features in greater detail.

Note that the commands that are given further are named by the keys you type
to enter them but you may change these keys (@pxref{Key bindings}).

@node Getting Started, Using Variables, Introduction, Top
@chapter Getting started with MPFC

@menu
* Launching MPFC::
* Moving around::
* Playing files::
* Playlist management::
* Window system::
* Other features::
@end menu

@node Launching MPFC, Moving around, Getting Started, Getting Started
@section Launching MPFC
To launch MPFC type:

@example
mpfc [options] [files]
@end example

Here [options]
is a list of variables you set directly (@pxref{Using Variables}) and [files]
is a list of files you want to play. For example, to play file song.mp3 type:

@example
mpfc file.mp3
@end example

File list may be empty, this means
you will either continue playing the previous play list (if the respective
option is set), or start with an empty play list.

You may also specify a plugin that will be used for playing file. This notation
with special plugins that play virtual files (e.g audiocd plugin) and also
if file has non-standard extesion. For example:

@example
mpfc audiocd://track0* mp3://some-file-with-no-mp3-extension audiocd://
@end example

First pattern in this list specifies all the Audio-CD tracks from 1 to 9,
second is simply a hint for MPFC to use mp3 plugin, and the last means to
add total Audio-CD.

Note that ``objects'' system is no longer used.

If you want to exit MPFC use command @kbd{q}.

@node Moving around, Playing files, Launching MPFC, Getting Started
@section Moving around
As soon as you have launched MPFC you will notice that the largest part of 
the screen is occupied by the play list. This is a list of all songs you can
play. Also you will notice a long line from left side of the screen to the
right side that selects one of the songs. This is cursor. It is used to 
select songs for various manipulations (e.g. playing them). Here are methods
you can use to move cursor within playlist.

@menu
* Basic cursor movement operations::
* Search::
* Marks::
@end menu

@node Basic cursor movement operations, Search, Moving around, Moving around
@subsection Basic cursor movement operations
Basic operations are the following:

@kbd{j} or @kbd{@key{Down}}: move cursor one line lower;

@kbd{k} or @kbd{@key{Up}}: move cursor one line higher;

@kbd{d} or @kbd{@key{PageDown}}: move cursor one screen lower;

@kbd{u} or @kbd{@key{PageUp}}: move cursor one screen higher;

@kbd{G}: move cursor to any specified line (see further);

@kbd{C}: move cursor to the currently playing song.

There is a feature with these commands. You may specify a repeat value before
any of them (except for C of course) and it will result in repeating the
command this number of times. For G command this value has a slightly different
meaning---it is the number of line you want to move to (without repeat value
@kbd{G} moves to the playlist end). 
To specify this value simply print it before the
command. As soon as you start entering digits, a prompt will appear and you
will be able to correct your input or even cancel entering this value by 
pressing ESC. For example, to move 5 lines down type: @kbd{5j}, and to 
move to the 30-th line of playlist type: @kbd{30G}.

@node Search, Marks, Basic cursor movement operations, Moving around
@subsection Search
You can move to a position in playlist also by searching by a string. There
are two types of search: simple and advanced. Simple search is invoked by
@kbd{/} command. You will be prompted for the string. When you enter a string
MPFC will search for a song with title containing this string and move 
cursor to the first match. 

Advanced search is invoked by @kbd{\} command. It allows searching not only
by the song title but also by other song information parameters 
(@pxref{Song Info}), so you will be prompted for the search criteria and then
for the string.

After doing search you can move to the next or previous match by using
commands @kbd{n} and @kbd{N} respectively.

To make search case-insensitive set variable ``search-nocase'' 
(0 by default).

@node Marks,, Search, Moving around
@subsection Marks
What if you have a large playlist and move periodically between some places
in its different parts? That's where marks are used.

You can store cursor position in any of 26 marks by using command 
@kbd{m<Letter>}, where <Letter> is a letter from a to z naming the mark. To 
move to mark <Letter> command @kbd{`<Letter>} is used. Also there is a special
mark---`. You can't set it directly but it always points to your last position
so if you want to return to it type: @kbd{``}.

@node Playing files, Playlist management, Moving around, Getting Started
@section Playing files
@menu
* Play/pause/stop::
* Play modes::
* Boundaries::
* Time back::
* Volume and balance::
* Equalizer::
@end menu

@node Play/pause/stop, Play modes, Playing files, Playing files
@subsection Play/pause/stop
There are four basic playing commands:

@kbd{@key{RET}}: starts playing currently selected song;

@kbd{x}: plays currently playing song from beginning (if it is playing now) or 
resumes playing after a pause or a stop;

@kbd{c}: pause/unpause;

@kbd{v}: stops playing.

Also you can jump to the next or previous songs. This is done by commands
@kbd{b} (next) and @kbd{z} (previous).

If you want to move within currently playing song use commands @kbd{<} and 
@kbd{>} 
for moving 10 seconds back or forth and command @kbd{gt} to move to any 
specified position (these commands support repeat values, for @kbd{gt} its
meaning is the same as for @kbd{G}, @pxref{Basic cursor movement operations}).

@node Play modes, Boundaries, Play/pause/stop, Playing files
@subsection Play modes
Normally after the song you specified to play finishes MPFC begins to play 
the next song in playlist and so on until it reaches the playlist end when it
stops. 

This behaviour may be changed by setting any of two play modes: shuffle or 
loop. In shuffle mode (@kbd{R} command) the next song to play is selected by
random. In loop mode (@kbd{L} command) the play order is as in the normal mode
but MPFC begins playing from the beginning when it reaches end. Also you may
set these modes by variables ``shuffle-play'' and ``loop-play'' 
(@pxref{Using Variables}).
 
@node Boundaries, Time back, Play modes, Playing files
@subsection Boundaries
Normally the beginning of playlist is the first song and the end is the last 
one. But you can change them by setting boundaries. First select a playlist
area in visual mode (@pxref{Visual mode}). Then you can use one of two commands:

@kbd{ps}: sets the boundaries respectively to your selection;

@kbd{p@key{RET}}: the same as previous but also begins playing the selection.

To clear boundaries use command @kbd{pc}.

@node Time back, Volume and balance, Boundaries, Playing files
@subsection Time back
Time back is a feature in MPFC that helps you to return to the place in song
where you have been the last time before jump (not that here manual jump is
meant, e.g. with a @kbd{@key{RET}} command). To do it use command 
@kbd{@key{BS}}.

@node Volume and balance, Equalizer, Time back, Playing files
@subsection Volume and balance
You can see current volume and balance in the top right corner of the screen
as two slidebars (the upper is volume). To increase or decrease volume and 
balance levels use @kbd{-} and @kbd{+} commands for volume and @kbd{[} and 
@kbd{]} commands for balance.

@node Equalizer,, Volume and balance, Playing files
@subsection Equalizer
MPFC supports equalizer. To launch equalizer panel use command @kbd{e}. Here
you are able to adjust equalizer band levels. To exit panel press @kbd{q} or
@kbd{@key{ESC}}. To move between bands press @kbd{h} or @kbd{@key{Left}} and 
@kbd{l} or @kbd{@key{Right}}, to change level press @kbd{j} or @kbd{@key{Down}}
and @kbd{k} or @kbd{@key{Up}}.

You are able also to load preset from a Winamp EQF file. To do this press
@kbd{@key{p}} and enter file name.

You can control equalizer parameters using variables. These variables are
``eq-band1'', @dots{}, ``eq-band10'' and ``eq-preamp''.

Note that equalizer may be disabled by setting ``equalizer-off'' variable.

@node Playlist management, Window system, Playing files, Getting Started
@section Playlist management
@menu
* Visual mode::
* Add/remove::
* File browser::
* Save::
* Sort::
* Move::
* Undo::
* Song Info::
@end menu

@node Visual mode, Add/remove, Playlist management, Playlist management
@subsection Visual mode
Many commands (e.g. sort) may affect a group of songs. MPFC allows you to
make continuous selections (starting from one song and ending with another).
To make such a selection place cursor in one of the selection boundaries, then
switch to the visual mode (by @kbd{V} command) and move cursor to another bound.
You can use any of the cursor movement commands. After the selection is made 
you can switch back to normal mode (by entering this command one more time).

@node Add/remove, File browser, Visual mode, Playlist management
@subsection Add/remove
There are three commands for add/remove purposes. To add song use @kbd{a}.
After you enter 
this command the edit box will appear where you are able to enter file name.
Name autocompletion is supported (by @kbd{@key{TAB}} key). 
Note that MPFC allows you to play streaming audio. To do it place ``http://''
in the beginning of file name.

Remove command (@kbd{r}) removes the currently selected group of files.

@node File browser, Save, Add/remove, Playlist management
@subsection File browser
File browser is a special tool created to help you adding files to the play
list. Launch it using @kbd{B} command. To select/deselect file press
@kbd{@key{INSERT}} key. Also you may select or deselect a group of files
matching a specified pattern. To do this press @kbd{+} (for select) or
@kbd{-} (for deselect) key and enter the pattern. After you have selected
the files you can add them to play list by pressing @kbd{a} or @kbd{r} key.
The latter one also clears the existing play list. You may press
@kbd{h} to go to your home directory, @kbd{@key{BACKSPACE}} to go to the
parent directory or @kbd{@key{c}} to manually specify a directory you want
to move to. 

File browser always is in one of two modes: normal or song info. In normal 
mode file names are displayed. In song info mode some parts of song info
are displayed. To control what parts exactly and screen space reserved for
them you can use special variables: ``fb-fname-len'' (for file name),
``fb-title-len'' (for song name), ``fb-artist-name'' (for artist), 
``fb-album-len'', ``fb-year-len'', ``fb-genre-len'', ``fb-comments-len'',
``fb-track-len'' and ``fb-time-len'' (for song length). Note that these fields
appear in the latter order and you can't change it. To switch between normal
and song info modes press @kbd{i}.

You can navigation in a directory more easy using search mode. To set it
press @kbd{s} key and the enter name of file (or its title if you are in
info mode) you want to jump to. As you will type the name cursor will move
to the respective file. If you want to stop this process press 
@kbd{@key{ESCAPE}}.

To exit browser press @kbd{q}.

@node Save, Sort, File browser, Playlist management
@subsection Save
To save playlist use @kbd{s} command. You will be prompted for file name.
It must end with ``.m3u'' or ``.pls'' extension, so you can save playlist
in any of these two formats.

@node Sort, Move, Save, Playlist management
@subsection Sort
To sort playlist use command @kbd{S}. First you will be asked whether to sort
globally or not. If you choose global sorting the entire playlist will be
sorted, otherwise---only the current selection. Then you specify the sort 
criteria (by title, file name, path and file name or path and track) and the 
sorting is done.

Also you can tell MPFC to do sorting automatically on loading songs. Set 
``sort-on-load'' variable to do this. By default sorting by title is done, but
you may change this behaviour with ``sort-on-load-type'' variable 
(``sort-by-title'', ``sort-by-file-name'', ``sort-by-path-and-file'' and
``sort-by-path-and-track'' values).

@node Move, Undo, Sort, Playlist management
@subsection Move 
You may move a part of playlist. To do this select this part and use one of
the three movement commands:

@kbd{J}: move selection one line down;

@kbd{K}: move selection one line up;

@kbd{M}: move selection to any specified poisition.

Note that these commands support repeation value specification 
(@pxref{Basic cursor movement operations}). For @kbd{M} command this value
meaning is the same as for @kbd{G}.

@node Undo, Song Info, Move, Playlist management
@subsection Undo
MPFC supports undo playlist management actions history. Undoable actions are
the following: add/remove songs, sort and move playlist. To undo action use
@kbd{U} command and to redo---@kbd{D} command.

@node Song Info,, Undo, Playlist management
@subsection Song Info
Each song may have some information associated with it. This information
include: song, artist and album names, year, track number, song genre and 
comments. The song format must support setting these fields in order you
can make advantage of them (e.g. for MP3 this information is written in its
ID3 tag). 

You can view and edit this information using song info editor dialog. To 
call it place cursor to the respective song and use @kbd{i} command. 
You can also edit info for multiple songs. To do it select these songs in
visual mode and answer ``No'' to the appearing question. The dialog
will appear (if the format allows you). Then you will be able to change its
contents by setting focus to the respective edit box (press @kbd{@key{TAB}}
several times to reach it). If you want to save changes press @kbd{@key{RET}},
otherwise press @kbd{@key{ESC}}. If some of the selected songs have different
values for an info field it will remain the same unless you change it. If you
change any field its value will be saved to each of the selected songs.

You may change songs title accordingly to their info. To do it you must change
``title-format'' variable value (@pxref{Using Variables}). Its value may be any
string including some format sequences:

%p means artist name;

%a means album name;

%f means file name;

%F means full file name (with path);

%e means file extension;

%t means song name;

%n means track number;

%y means song year;

%g means song genre;

%c means song comments.

The default value is ``%p - %t'' that means that title contains artist and 
song names divided by dash sign.

Some plugins may have special functions associated with their respective
songs (e.g. function of removing tags for mp3 plugin). This function is called
by clicking respective button in the song info dialog.

Also there is a command that reloads all selected playlist songs 
information---@kbd{I}.

@node Window system, Other features, Playlist management, Getting Started
@section Window system
@menu
* Overview::
* Using dialogs::
* Styles::
@end menu

@node Overview, Using dialogs, Window system, Window system
@subsection Overview
MPFC has an advanced window system. When you start MPFC there always appears
play list window. As a result of some events there can appear other windows
(e.g. file browser, help screen or various dialogs). 

All the top-level windows are listed in a special place on the root window
which is called ``window bar'' and situated on the last line of the screen.
Currently active (``focused'') window is marked with green color. To move
between windows you press @kbd{@key{ALT}-,} or @kbd{@key{ALT}-.} keys. You
may also select a window by clicking mouse left button its image on the 
window bar.

Most of the windows have a border with controls on it. These controls are
a close window button (presented by ``x'' letter) and maximize button
(``o'' letter). Use them by clicking mouse or pressing buttons 
@kbd{@key{ALT}-c} and @kbd{@key{ALT}-m} respectively.

Windows are often resizable and movable. To turn window to the
resize mode press @kbd{@key{ALT}-s}, to the move mode--@kbd{@key{ALT}-p}.
After that window border will turn its color to green and you'll be able
to change size/position of the window using arrow keys. Then press 
@kbd{@key{ENTER}} to finish operation.

@node Using dialogs, Styles, Overview, Window system
@subsection Using dialogs
Dialogs are widely used in MPFC for operations where user input is required.
There is number of special keys for navigating through the dialog items.
First of all, you can use @kbd{@key{TAB}} key to move to the next item.
But in big dialogs it is better to use special shortcuts to items. Many of
the items have a letter associated with them. This letter is usually marked
red on the label. So when you press @kbd{@key{ALT}} with this letter you
jump to it.

Also there are @kbd{@key{ENTER}} key connected with the ``OK'' button and
@kbd{@key{ESCAPE}} or @kbd{@key{CTRL}-G} connected with the ``Cancel'' button.

@node Styles,, Using dialogs, Window system
@subsection Styles
Window system display parameters are highly configurable. This configuration
is implemented with a concept of a style.

Style is a parameter of some item of the interface. In fact it is a 
variable (@pxref{Using Variables}) that you may set as you always do. 
Usually it represents color and symbol attribute of the text. In that case
variable value has the following format: <color>[:bg-color[:attrib]].
Color is one of the following values: ``black'', ``red'', ``green'', ``blue'',
``yellow'', ``magenta'', ``cyan'' and ``white''. ``attrib'' field is a
combination (delimited by a comma) of the following values: ``standout'',
``underline'', ``reverse'', ``blink'', ``dim'', ``bold'', ``protect'',
``invis'' and ``altcharset''. Note that not all of these attributes are
supported on your terminal. In fact you usually will use only ``bold'' and,
maybe, ``blink''.

Before listing style names a note on window classes should be made. Any window
belongs to some class. All these classes make an hierarchy. The main purpose
of the classes is to let the user configure styles of a group of similar 
windows (e.g edit boxes). 

Root configuration list where all the window system related variables are
holded is ``windows''. It has child list ``classes''. This list has many
child lists for each of the available classes.

When MPFC searches for a style for a particular window it first seeks for 
a variable of the name same with the style name in the window configuration
list. In fact, this list is not (yet) accessible for a user, so it does not
make much sense. Then it searches for this variable in the window class 
configuration list, then in that class parent class list, and so on, until
it reaches the base window system configuration list. If it is not found
there, style is undefined (value for an undefined style is ``white:black'').
So, for example, if you want all the edit boxes to display their text
bold green with red background you should set variable 
``windows.classes.editbox.text-style'' to ``green:red:bold''.

Here is a list of some window classes and their styles.

@menu
* basic::
* player::
* browser::
* help::
* eqwnd::
* logger_view::
* dialog::
* dlgitem::
@end menu

@node basic, player, Styles, Styles
@subsection basic
``basic'' class is the base window class. It defines the following styles:

@itemize
@item caption-style;
@item border-style;
@item repos-border-style;
@item maximize-box-style;
@item close-box-style;
@item wndbar-focus-style;
@item text-style;
@item focus-text-style.
@end itemize

@node player, browser, basic, Styles
@subsection player
``player'' class is class of the player window. Styles:

@itemize
@item plist-style: style of play list item;
@item plist-playing-style: style of play list item currently being played;
@item plist-selected-style: style of a selected play list item;
@item plist-sel-and-play-style: combination of the previous two;
@item plist-time-style: style of play list item time;
@item title-style: current song title style;
@item time-style: current time style;
@item audio-params-style: audio parameters style;
@item about-style: about string style;
@item slider-style: sliders style (for time, volume and balance);
@item play-modes-style: ``Loop'' and ``Shuffle'' strings style;
@item status-style: status line style.
@end itemize

@node browser, help, player, Styles
``browser'' class is class of file browser window. Styles:

@itemize
@item file-style;
@item cur-file-style;
@item dir-style;
@item cur-dir-style;
@item selection-style;
@item cur-selecton-style;
@item search-prompt-style;
@item search-string-style;
@item title-style;
@item header-style.
@end itemize

@node help, eqwnd, browser, Styles
``help'' class is class of help screen. Styles:

@itemize
@item item-style;
@item prompt-style.
@end itemize

@node eqwnd, logger_view, help, Styles
``eqwnd'' class is class of equalizer window. Styles:

@itemize
@item band-style;
@item focus-band-style;
@item label-style;
@item focus-label-style.
@end itemize

@node logger_view, dialog, eqwnd, Styles
``logger_view'' is child of ``scrollable'' class. Styles of ``scrollable'':

@itemize
@item scroll-arrow-style;
@item scroll-bar-style;
@item scroll-slider-style.
@end itemize

Styles of ``logger_view'':

@itemize
@item logger-normal-style;
@item logger-status-style;
@item logger-warning-style;
@item logger-error-style;
@item logger-fatal-style;
@item logger-debug-style.
@end itemize

@node dialog, dlgitem, logger_view, Styles
``dialog'' class is class of dialogs. It has no specific styles.

@node dlgitem,, dialog, Styles
``dlgitem'' class is class of various dialog items. It has many child classes:
``button'', ``editbox'' (with ``filebox'' and ``combo'' children), ``label'',
``radio'', ``checkbox'', ``hbox'' and ``vbox''.

@node Other features,, Window system, Getting Started
@section Other features
@menu
* Command execution::
* Log::
* History::
* Setting mouse parameters::
@end menu

@node Command execution, Log, Other features, Other features
@subsection Command execution
You are able to execute an external command when you are in MPFC. To do this
use @kbd{!} command. You will be prompted for the command. After you finish
press @kbd{@key{RET}} to return to MPFC.

@node Log, History, Command execution, Other features
@subsection Log
MPFC has a log system. You may view log messages in two places. First is
@file{~/.mpfc/log} file (this name may be changed by setting ``log-file''
variable). Second is logger view window. It is activated by pressing
@key{O} key. 

An important issue concerning the log system is log level. It is set with
``log-level'' variable and it controls the amount of messages you get. 
Possible values for it are: ``none'', ``low'', ``default'', ``high'' and
``debug'' (there is a little use from the latter for a common user, though).

@node History, Setting mouse parameters, Log, Other features
@subsection History
Some edit boxes when you do input support history so that you can restore
any of the strings you have entered there before. To jump between these
strings press @kbd{@key{Up}} for going back and @kbd{@key{Down}} for going 
forth.

@node Setting mouse parameters,, History, Other features
@subsection Setting mouse parameters
MPFC tries to guess the type of mouse driver by the name of terminal it is
running on. But it can do it wrong, so you may specify this type explicitly.
Use variable ``mouse'' for this purpose. It may have one of the following
values: ``none'' (no mouse is used), ``gpm'' (use gpm---this is normally
used when you run MPFC on console) and ``xterm'' (on xterm-like terminal).

@node Using Variables, Plugins, Getting Started, Top
@chapter Variables usage

MPFC supports variables that allow you to control some of its options. Each
variable has a value associated with it. This value is a string. If variable
is not set its value is considered to be ``0''. Also you can simply ``set''
variable so that its value becomes ``1''. These two values are often used
when specifying a choice result. ``0'' means ``no'' and ``1'' means ``yes''.
So when variable is not set, its value respects to ``no'' and when it is
set---to ``yes''.

@menu
* Setting variables::
* Key bindings::
@end menu

@node Setting variables, Key bindings, Using Variables, Using Variables
@section Setting variables
You may set a variable in three different places.

The first is any of MPFC configuration files (@file{/etc/mpfcrc} and
@file{~/.mpfcrc}).  In this file each variable
is specified in its own line in the format: <variable>[=value], where
``variable'' is variable name and ``value'' is variable value. You may skip
the second part of this expression, then variable will be set to ``1''.
``#'' in the line beginning starts a comment.
Besides main configuration file you can use a local configuration file in 
the current directory. Its name is also @file{.mpfcrc} but settings from it
override the settings from the main file. Here is a short example of MFPC
configuration file:

@example
# MPFC configuration file
lib-dir=/usr/local/lib/mpfc
output-plugin=oss
play-from-stop
@end example

The second place where you can set variable is command line when you invoke
MPFC (@pxref{Launching MPFC}). The format is the same with the configuration
file but you must add prefix ``@verb{--}'' before each definition. 
Here is an example analogous to the previous:

@example
mpfc --lib-dir=/usr/local/lib/mpfc --output-plugin=oss --play-from-stop list.m3u
@end example

The third place is inside running MPFC window using one of two variables 
managers. First is called ``mini-manager'' and is invoked by @kbd{o} command.
You enter variable name and value and it is set. Also there is an 
advanced variables manager that is invoked by @kbd{O} command. When you
execute this command a dialog will appear. In this dialog you can move through
variables list, set value of each of them, create a new variable, save 
variables list to the main configuration file and restore value of changed
variable. Note that buttons are pressed by @kbd{@key{SPC}} key. To exit the
manager press @kbd{@key{RET}} or @kbd{@key{ESC}}.

@node Key bindings,, Setting variables, Using Variables
@section Key bindings
There are standard key bindings for every MPFC action but you can change these
bindings. Bindings are controlled by special variables starting with ``kbind-''
prefix. Here are these variables with their default values:

@itemize
@item
kbind-quit: quit MPFC (q);
@item
kbind-move-down: move one line down (j or <Down>);
@item
kbind-move-up: move one line up (k or <Up>);
@item
kbind-screen-down: move one screen down (d or <PageDown>);
@item
kbind-screen-up: move one screen up (u or <PageUp>);
@item
kbind-move: move to any position (G);
@item
kbind-start-play: start playing (<Enter>);
@item
kbind-play: resume playing (x);
@item
kbind-pause: pause (c):
@item
kbind-stop: stop (v):
@item
kbind-next: go to the next song (b);
@item
kbind-prev: go to the previous song (z);
@item
kbind-time-fw: go forth inside the song (>);
@item
kbind-time-bw: go back inside the song (<);
@item
kbind-time-move: move inside the song (gt);
@item
kbind-vol-bw: decrease volume (-);
@item
kbind-vol-fw: increase volume (+);
@item
kbind-bal-bw: decrease balance ([);
@item
kbind-bal-fw: increase balance (]);
@item
kbind-info: song info editor (i);
@item
kbind-add: add file (a);
@item
kbind-rem: remove songs (r);
@item
kbind-save: save playlist (s);
@item 
kbind-sort: sort playlist (S);
@item
kbind-visual: set/unset visual mode (V);
@item
kbind-centrize: centrize view (C);
@item
kbind-search: search (/);
@item
kbind-next-match: go to the next search match (n);
@item
kbind-prev-match: go to the previous search match (N);
@item
kbind-help: lauch help window (?);
@item
kbind-equalizer: launch equalizer window (e);
@item
kbind-shuffle: set shuffle mode (R);
@item
kbind-loop: set loop mode (L);
@item
kbind-var-manager: launch variables manager (O);
@item
kbind-var-mini-manager: variables mini-manager (o);
@item
kbind-plist-down: move play list down (J);
@item
kbind-plist-up: move play list up (K);
@item
kbind-plist-move: move play list part to another place (M);
@item
kbind-undo: undo action (U);
@item
kbind-redo: redo action (D);
@item
kbind-reload-info: reload playlist songs information (I);
@item
kbind-set-play-bounds: set play boundaries (ps);
@item
kbind-clear-play-bounds: clear play boundaries (pc);
@item
kbind-play-bounds: set play boundaries and play (p<Enter>);
@item
kbind-exec: execute an external command (!);
@item
from ``kbind-marka'' to ``kbind-markz'': set respective mark (ma@dots{}mz);
@item
from ``kbind-goa'' to ``kbind-goz'': go to the respective mark (`a@dots{}`z);
@item
kbind-goback: go back (@``);
@item
kbind-time-back: time back (<Backspace>);
@item
kbind-reload-plugins: reload plugins (P).
@end itemize

Values for these variables contain keys specifications divided by ``;'' (if
you specify several bindings). Key may be a usual character or one of the
following sequences: <Up>, <Down>, <Right>, <Left>, <PageUp>, <PageDn>, <Home>,
<End>, <BS> (backspace), <Del>, <Ret> and <Tab> (including brackets). If you
want to specify one of the special symbols (e.g. ``<'') place ``\'' before 
such symbol.

You can save groups of these settings as key binding schemes. 
Schemes are stored in
directory @file{~/.mpfc/kbinds}. Each scheme is a file with syntax same with
MPFC configuration file where these variables are set.

@node Plugins, Copying, Using Variables, Top
@chapter Plugins usage

Plugins are used to expand MPFC functionality. There are four kinds of
plugins: input, output, effect and charset. Input plugins are used to play 
files of some kind of format. Output plugins are used to work with sound 
output devices. Effect plugins are used to add effects to playing. Charset
plugins are used to support various charsets and convert between them.

Plugins are stored commonly in @file{/usr/lib/mpfc/} or 
@file{/usr/local/lib/mpfc}.
There are four directories for each of these plugins types: @file{input},
@file{output}, @file{effect} and @file{charset}. Each plugin is a shared 
library (.so file). To install plugin simply copy it to the respective 
directory.

Here these types are described in a greater detail and also some standard
plugins are considered.

@menu
* Input::
* Output::
* Effect::
* Charsets::
@end menu

@node Input, Output, Plugins, Plugins
@section Input plugins
@menu
* Common formats::
* Audio CD::
* Radio::
* Recorder::
@end menu

@node Common formats, Audio CD, Input, Input
@subsection Common formats
MPFC has four built-in plugins for common formats: MP3, Ogg Vorbis, WAV and
TiMidity.
The first three are plugins for respective formats and the latter is a simple
plugin for midi that uses TiMidity++, so if you need this program to handle
it.
These plugins have nothing special. The only aspect to note is connected 
with MP3 plugin. 

There are two methods to calculate MP3 song length: quick 
and correct. In most cases quick method works correctly but for some songs with
variable bitrate their length would be improper. Correct method calculates
all songs length absolutely correctly but it is rather long. It is quick
method that is turned on by default. To change this set variable
``mp3-quick-get-len'' to ``0''.
Also there is a note on Ogg Vorbis plugin behaviour. By default it always
uses UTF-8 as output charset but you may override this behaviour by setting
``ogg-always-use-utf8'' variable to ``0'', so it would save tags in your
common output charset (@pxref{Charsets}).

@node Audio CD, Radio, Common formats, Input
@subsection Audio CD
Audio CD plugin supports Audio CDs. Audio-CD uses a special virtual file
system with files named @file{track01}, ..., @file{trackNN}, where ``NN'' is
total number of tracks on the disc. To specify such a file you must put 
plugin prefix (``audiocd://'' before the name). You may also use patterns
(e.g. @file{audiocd://track0[4-7]}) or even put @file{audiocd://}---this
means total CD.

By default CD-ROM device is @file{/dev/cdrom}, but you can change this
behaviour by setting ``audiocd-device'' variable.

Song info for Audio CD is supported through CDDB. If you want to obtain
this information you must be connected to the Internet. CDDB server is set
through ``cddb-host'' variable. The default value is ``freedb.freedb.org''.
After MPFC gets 
information it stores it on your local machine and further loads it from this
machine. Alternatively you may specify info by your own and store it. CDDB
submission is not supported yet. Note that to use info for Audio CD you must
have @file{cddb} directory in your @file{~/.mpfc}.

Also you can submit info to CDDB. To do it click on the respective button
in info editor for any of this CD songs. Note that you must have two variables
set. First is ``cddb-email'' and it holds your e-mail address. Second is
``cddb-category'' and it holds the category of disc you are about to submit.
Possible values are: ``blues'', ``classical'', ``country'', ``data'', ``folk'',
``jazz'', ``misc'', ``newage'', ``reggae'', ``rock'' and ``soundtrack''.

@node Radio, Recorder, Audio CD, Input
@subsection Radio
MPFC has one special plugin for listening to radio. Note that to use it you
must have radio card installed as a Video4Linux device. Just like 
audiocd it uses virtual file system. File name is the radio station 
frequency (in MHz). For example, to listen to station 91.5 MHz you enter
file name @file{radio://91.5}. Note that wildcards patterns are not supported
for this plugin.

@node Recorder,, Radio, Input
@subsection Recorder
Recorder is a plugin for recording audio from microphone, line-in or Audio-CD.
This is different from, for example, Audio CD that also allows you to record
its output. Unlike it recorder doesn't handle tracks on disk and other 
stuff---it simply reads data that is playing now, so you may run any external
program that plays audio-cd and run MPFC with this plugin. But of course it
is much more useful to record audio from line-in or microphone.

Recorder uses virtual file system. It supports the following virtual files:
``mic'' (for microphone souce), ``line'' (for line-in) and ``cd'' 
(for audio cd). To record audio you open this file 
(e.g. @file{recorder://line}, set output plugin to the one you want to use 
(commonly ``disk_writer'') and play this file.

@node Output, Effect, Input, Plugins
@section Output plugins
There may be only one active output plugin at the time. This name is set
using variable ``output-plugin'' where the plugin name is stored (by default
``oss'').

Here is description for standard MPFC plugins.

@menu
* OSS::
* Disk Writer::
@end menu

@node OSS, Disk Writer, Output, Output
@subsection OSS
OSS is a standard output plugin that you should use to listen music. 
The DSP device this plugins uses by default is @file{/dev/dsp} and then
@file{/dev/dsp1}. You can change it with variable ``oss-device'' where you
enumarate the devices separated by commas. First MPFC looks for the first
device in this list, if it failed then for the second and so on.

@node Disk Writer,, OSS, Output
@subsection Disk Writer
Disk Writer plugin is used to save the audio output to disk. Each song that 
you play is stored in a WAV file. The name of this file is same with the file
name of the song you play and path is read from ``disk-writer-path'' variable.

@node Effect, Charsets, Output, Plugins
@section Effect plugins
To enable effect plugin ``plugin'' set variable ``enable-effect-plugin''.

@menu
* Echo::
@end menu

@node Echo,, Effect, Effect
@subsection Echo effect plugin
MPFC includes one effect plugin---plugin producing echo. Its behaviour is
controlled by four variables:

@itemize 
@item
echo-delay: echo delay in milliseconds (0@dots{}1000), by default 500;
@item
echo-volume: echo volume in percents, by default 50;
@item
echo-feedback: echo feedback in percents, by default 50;
@item
echo-surround-enable: flag of whether surround effect is enables, by default 0.
@end itemize

@node Charsets,, Effect, Plugins
@section Charset plugins
Charsets are used in song info management. Suppose you have song with info
written in charset A and your display charset is B. This is where charsets
management is used. Display charset is set with variable ``charset-output''.
Input charset may be stored with the text in song info, so in this case you
don't need to specify it. But in many cases it is not, that's why you may
want to set it. It is done with variable ``charset-input''. Also there is
a variable ``charset-save-info'' that controls the charset is written down in.

And what about charset plugins? They are used to support various charsets.
In fact, MPFC internally supports only one charset---UTF-8 (respective 
variable value is ``utf-8''). So each one-byte
charset that is used by you should be supported by some plugin. One plugin
may support many charset (e.g. charsets for some language). Also there are
special charsets called automatic. They expand to other charsets. These 
charsets are useful when you have songs with different charsets, so MPFC
will try to guess charset in each case. This certainly makes sense only for
input charsets.

MPFC is distributed with one charset plugin---for russian charsets. It supports
the following charsets: KOI8-R (``koi8-r''), Windows-1251 (``cp1251'') and
automatic russian charsets (``ru-auto'') that expands to the latter two or 
UTF-8.

@node Copying,, Plugins, Top
@chapter Copying information
MPFC is licensed under GNU GPL license. To read it view @file{COPYING} file in
MPFC distribution.

@bye
